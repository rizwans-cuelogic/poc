{% extends "ebs/common.html" %}
{% load static %}
{% block head_extra %}
<link rel="stylesheet" type="text/css" href="{% static 'ebs/css/manage_blog.css' %}"/>
<link rel="stylesheet" type="text/css" href="{% static 'ebs/sweetalert/dist/sweetalert.css' %}">
{% endblock %}
{% block content %}
{% for message in messages %}
	<div id="message"></div>
{% endfor %}
<div class="container">
	<div class="table-responsive">
  		<table class="table results">
			<thead>
				<tr>
					<th class="content-middle" width="30">
						<input type="checkbox" id="select-all">
					</th>
					<th width="200">
						<a id="delete-button" class="btn btn-ternary">
  						<i class="fa fa-trash-o fa-lg"></i> Delete</a>
  					</th>
					<th>
						<form class="form-inline" method="GET" action="">
							<div class="search-wrapper">
								<input type="text" name="q" class="form-control" placeholder="Search" value='{{request.GET.q}}'>
								<select id="filter" class="filter-margin form-control" name="filterbox">
									<option value="al">All</option>
									<option value="en">Enabled</option>
									<option value="ds">Disabled</option>
								</select>
								<button class="filter-margin btn btn-default" type="submit">
									<i class="glyphicon glyphicon-search"></i>
								</button>
							</div>
						</form>	
					</th>
					<th width="90">
						<a class="btn btn-ternary" href="{% url 'create_blog' %}"><i class="fa fa-plus fa-fw"></i> Create</a>
					</th>
				</tr>
			</thead>
			<tbody>
				{% if datas %}
				{% for query in datas %}
				<tr id="blog_{{query.blog_id}}">
					<td class="content-middle">
						<input type="checkbox" name="{{query.blog_id}}" value="{{query.blog_id}}">
					</td>
					<td class="image-wrapper">
					{% if query.blog_file %}
						<a href="{% url 'detail_blog' id=query.blog_id %}"><img class="blog-image img-responsive" src="/media_cdn/{{query.blog_file}}"/></a>
					{% else %}
						<a href="{% url 'detail_blog' id=query.blog_id %}"><img class="blog-image img-responsive" src="{% static 'ebs/img/default.png' %}"/></a>
					{% endif %}
					</td>
					<td>
						<h3><a href="{% url 'detail_blog' id=query.blog_id %}">{{query.blog_title }}</a></h3>
						<p class="blog-text">{{ query.blog_description| striptags | safe| truncatewords_html:50}}</p>
					</td>
					<td class="content-middle text-right">
						<a class="btn btn-ternary" href="{% url 'update_blog' id=query.blog_id%}"><i class="fa fa-pencil fa-fw"></i> Edit</a>
					</td>
				</tr>
				{% endfor %}
				{% else %}
				<tr>
					<td colspan="5"> </td>
				</tr>
				<tr class="warning">
					<td colspan="4"><i class="fa fa-warning"></i> No Blog</td>
				</tr>	
				{% endif %}
			</tbody>
	 	</table>
	</div>
{% include "ebs/paginator.html"  with page=datas %}
</div>
{% endblock %}
{% block extra_js %}
<script type="text/javascript" src="{% static 'ebs/sweetalert/dist/sweetalert.min.js' %}"></script>
<script type="text/javascript" src="{% static 'ebs/js/manage_blog.js' %}"></script>
{% endblock %}
